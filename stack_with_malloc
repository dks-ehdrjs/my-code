#include <stdlib.h>
#include <stdio.h>

#define MAX_SIZE 5

int main() {
    int* arr[MAX_SIZE]; // 정수 포인터 배열
    char select;
    int top = -1;
    int value; // 사용자 입력값을 저장할 변수

    while (1) {
        printf("push(u) or pop(o): ");
        scanf_s(" %c", &select); // 앞에 공백을 추가하여 앞의 공백 문자를 무시

        if (select == 'u') {
            if (top == MAX_SIZE - 1) {
                printf("스택이 가득 찼습니다\n");
            }
            else {
                printf("정수 입력: ");
                scanf_s("%d", &value); // 사용자로부터 정수 값을 입력받음
                int* num = (int*)malloc(sizeof(num)); // 정수를 위한 메모리를 동적 할당
                if (num != NULL) {
                    *num = value; // 할당된 메모리에 값을 저장
                    top++;
                    arr[top] = num; // 배열에 포인터를 저장
                    printf("%d push\n", *num);
                }
                else {
                    printf("메모리 할당 실패\n");
                }
            }
        }
        else if (select == 'o') {
            if (top == -1) {
                printf("스택이 비어 있습니다\n");
            }
            else {
                int* num = arr[top];
                printf("%d pop\n", *num);
                free(num); // 동적으로 할당된 메모리를 해제
                top--;
            }
        }
        else {
            printf("유효하지 않은 선택입니다\n");
        }
    }
}
